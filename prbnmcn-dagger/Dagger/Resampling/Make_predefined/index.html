<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Make_predefined (prbnmcn-dagger.Dagger.Resampling.Make_predefined)</title><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><link rel="stylesheet" href="../../../../odoc.support/katex.min.css"/><script src="../../../../odoc.support/katex.min.js"></script><script>
//<![CDATA[

          document.addEventListener("DOMContentLoaded", function () {
            var elements = Array.from(document.getElementsByClassName("odoc-katex-math"));
            for (var i = 0; i < elements.length; i++) {
              var el = elements[i];
              var content = el.textContent;
              var new_el = document.createElement("span");
              new_el.setAttribute("class", "odoc-katex-math-rendered");
              var display = el.classList.contains("display");
              katex.render(content, new_el, { throwOnError: false, displayMode: display });
              el.replaceWith(new_el);
            }
          });
        
//]]>
</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">prbnmcn-dagger</a> &#x00BB; <a href="../../index.html">Dagger</a> &#x00BB; <a href="../index.html">Resampling</a> &#x00BB; Make_predefined</nav><header class="odoc-preamble"><h1>Module <code><span>Resampling.Make_predefined</span></code></h1><p><code>Make_predefined (F) (Sampler)</code> produces implementations of stratified and systematic resampling over a field <code>F</code> and given a uniform sampler <code>Sampler</code>.</p></header><nav class="odoc-toc"><ul><li><a href="#algorithm-description">Algorithm description</a><ul><li><a href="#systematic-resampling">Systematic resampling</a></li><li><a href="#stratified-resampling">Stratified resampling</a></li></ul></li><li><a href="#parameters">Parameters</a></li><li><a href="#signature">Signature</a></li></ul></nav><div class="odoc-content"><h3 id="algorithm-description"><a href="#algorithm-description" class="anchor"></a>Algorithm description</h3><p>A detailed treatment of the following algorithms is given in <a href="https://www.stats.ox.ac.uk/~doucet/doucet_johansen_tutorialPF2011.pdf">A Tutorial on Particle Filtering and Smoothing: Fifteen years lated (Doucet &amp; Johansen)</a> section 3.4.</p><p>In the following, we consider a family of scored particles <code class="odoc-katex-math">(x_k, w_k)</code> for <code class="odoc-katex-math">k=1 \ldots K</code> with total score <code class="odoc-katex-math">W=\sum_k w_k</code>.</p><p>The outcome of the resampling strategies described below is a map from each particle <code class="odoc-katex-math">x_k</code> to a replication count <code class="odoc-katex-math">r_k</code>, such that <code class="odoc-katex-math">\sum_k r_k = N</code>. The resulting population will consist in <code class="odoc-katex-math">r_1</code> copies of <code class="odoc-katex-math">x_1</code>, <code class="odoc-katex-math">r_2</code> copies of <code class="odoc-katex-math">x_2</code>, etc, all with equal score <code class="odoc-katex-math">\frac{1}{W}</code>.</p><h4 id="systematic-resampling"><a href="#systematic-resampling" class="anchor"></a>Systematic resampling</h4><p>Let <code class="odoc-katex-math">U</code> be sampled uniformly in <code class="odoc-katex-math">[0,\frac{1}{N}]</code>. Consider the set of points <code class="odoc-katex-math">U_i = U + \frac{i-1}{N}</code> for <code class="odoc-katex-math">i=1 \ldots N-1</code>. Associate to each particle <code class="odoc-katex-math">x_k</code> its cumulative score <code class="odoc-katex-math">W_k = w_1 + ... + w_k</code> and us set <code class="odoc-katex-math">W_0 = 0</code>. We set <code class="odoc-katex-math">r_k</code> to be the cardinal of the set of <code class="odoc-katex-math">W \cdot U_i</code> included in <code class="odoc-katex-math">[W_{k-1}, W_k)</code>.</p><h4 id="stratified-resampling"><a href="#stratified-resampling" class="anchor"></a>Stratified resampling</h4><p>For each <code class="odoc-katex-math">i</code> in <code class="odoc-katex-math">1 \ldots N</code>, let <code class="odoc-katex-math">U_i</code> be sampled uniformly in <code class="odoc-katex-math">[0, \frac{1}{N}]</code>. Associate to each <code class="odoc-katex-math">i</code> the particle <code class="odoc-katex-math">x_k</code> with the lowest <code class="odoc-katex-math">k</code> such that <code class="odoc-katex-math">\frac{i-1}{N} + U_i &lt; W_k/W</code>. The replication count <code class="odoc-katex-math">r_k</code> is the number of times <code class="odoc-katex-math">x_k</code> was selected in this process.</p><h2 id="parameters"><a href="#parameters" class="anchor"></a>Parameters</h2><div class="odoc-spec"><div class="spec parameter anchored" id="argument-1-F"><a href="#argument-1-F" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="argument-1-F/index.html">F</a></span><span> : <a href="../../Intf/module-type-Field/index.html">Intf.Field</a></span></code></div></div><div class="odoc-spec"><div class="spec parameter anchored" id="argument-2-Sampler"><a href="#argument-2-Sampler" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="argument-2-Sampler/index.html">Sampler</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h2 id="signature"><a href="#signature" class="anchor"></a>Signature</h2><div class="odoc-spec"><div class="spec value anchored" id="val-stratified_resampling"><a href="#val-stratified_resampling" class="anchor"></a><code><span><span class="keyword">val</span> stratified_resampling : <span>ess_threshold:<a href="argument-1-F/index.html#type-t">F.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'o</span>, <a href="argument-1-F/index.html#type-t">F.t</a>, <span class="type-var">'s</span>)</span> <a href="../index.html#type-strategy">strategy</a></span></span></code></div><div class="spec-doc"><p><code>stratified_resampling ess_threshold</code> executes stratified resampling if the estimated sample size <a href="../module-type-Particles/index.html#val-ess">P.ess</a> of the population is below <code>ess_threshold * P.size ()</code>, where <code>P</code> is the <a href="../index.html#type-particles">particles</a> module passed to the <a href="../index.html#type-strategy">strategy</a>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_arg</span> <p>if <code>P.size &lt; 2</code>, if <code>target_size &lt; 2</code> or if <code>ess_threshold</code> is not in the unit interval.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-systematic_resampling"><a href="#val-systematic_resampling" class="anchor"></a><code><span><span class="keyword">val</span> systematic_resampling : <span>ess_threshold:<a href="argument-1-F/index.html#type-t">F.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'o</span>, <a href="argument-1-F/index.html#type-t">F.t</a>, <span class="type-var">'s</span>)</span> <a href="../index.html#type-strategy">strategy</a></span></span></code></div><div class="spec-doc"><p><code>systematic_resampling ess_threshold</code> executes systematic resampling if the estimated sample size <a href="../module-type-Particles/index.html#val-ess">P.ess</a> of the population is below <code>ess_threshold * P.size ()</code> where <code>P</code> is the <a href="../index.html#type-particles">particles</a> passed to the <a href="../index.html#type-strategy">strategy</a>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_arg</span> <p>if <code>P.size &lt; 2</code>, if <code>target_size &lt; 2</code> or if <code>ess_threshold</code> is not in the unit interval.</p></li></ul></div></div></div></body></html>